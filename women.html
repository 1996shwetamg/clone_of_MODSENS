<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
    <style>
      #product-container{
        width:90%;
        margin:auto;
        display:grid;
        grid-template-columns: repeat(4,1fr);
        gap:20px;
      }
      #product-container div{
      text-align: center;
      }
      img{
        width:100%;
      }
    </style>
   
  </head>

  <body>
    <div id="main1">
        <select>
            <option value="">Filter by gender</option>
            <option value="women">women</option>
            <option value="men">men</option>
            <option value="kids">kids</option>
        </select>
        <select>
            <option value="">Filter by category</option>
            <option value="clothing">clothing</option>
            <option value="shoes">shoes</option>
            <option value="bags">bags</option>
        </select>
    </div>
    <div id="product-container">
      <!-- Here Append All the Products  -->
    </div>
  </body>
  <script>
    // Write all necessery JS here 
    let cont=document.getElementById("product-container")
  let filterselect=document.getElementById("filter");
let fetcheddata=[];

  filterselect.addEventListener("change",()=>{
   let filtered=fetcheddata.filter((ele)=>{
    if(ele.category===filterselect.value){
      return true;
    }else{return false}
   })
   show(filtered);
  })


    fetch("https://speeding-water-974839.postman.co/workspace/My-Workspace~ede106c2-5edc-4d21-8767-fb20885868b7/request/create?requestId=3aca4686-7079-45ea-a9f5-53b91151f605")

  .then((res)=>{
    return res.json();
  })
  .then((actualdata)=>{
    fetcheddata=actualdata.data;
  show(actualdata.data)
 
  })
  .catch((error)=>{
    console.log(error);
  })


  function show(data){
    cont.innerHTML=null;
  data.forEach((element)=>{
 

 let card=document.createElement("div");

  let image=document.createElement("img");
  image.setAttribute("src",element.image); 

  let brand=document.createElement("h2");
  brand.innerText=element.title;

  let price=document.createElement("h3");
  price.innerText=element.price;

  let description=document.createElement("p");
 description.innerText=element.description;

  let category=document.createElement("p");
  category.innerText=element.category;

  let rating=document.createElement("p")
 rating.innerText=element.rating.rate;

  let addtocart=document.createElement("button");
  addtocart.innerText="Add To Cart";

  addtocart.addEventListener("click",()=>{
let cartdata=JSON.parse(localStorage.getItem("cart"))||[];
isallready=false;
for(i=0;i<cartdata.length;i++){
  if(cartdata[i].id===element.id){
    isallready=true;
    break;
  };
} 

if(isallready===true){
alert("Product Already in Cart")
}else{
  cartdata.push({...element,quantity:1});
  localStorage.setItem("cart",JSON.stringify(cartdata));
  alert("Product Added To Cart")
}

  })

  card.append(image,brand,price,details,category,addtocart);
  cont.append(card);
  })
}

  </script>
</html>